[TOC]

# 01.Reversing



将可执行程序反汇编，通过分析反汇编代码来理解其代码功能（例如各接口的数据结构等），然后用高级语言重新描述这段代码，逆向分析原始软件的思路，这个过程就称作逆向工程（Reverse Engineering），有时也简单地称作逆向（Reversing）。

逆向工程可以让我们了解程序的结构及程序的逻辑，因此，利用逆向工程可以洞察程序的运行过程。

## 1.1 32位软件逆向技术

### 启动函数

对于win32应用程序的编写时，我们都需要实现一个`WinMain`函数，但在这个函数开始之前，首先被执行的是启动函数的相关代码。这段代码由编译器生成，用于初始化进程，完成后才会调用`WinMain`函数。对于Visual C++程序亦是如此。

所有c/c++程序运行时，启动函数的作用基本相同，包括检索指向新进程的命令行指针、检索指向新进程的环境变量指针、全局变量初始化和内存栈初始化等。当所有的初始化操作完成后，启动函数就会调用应用程序的进入点函数（`main`和`WinMain`）。调用`WinMain`函数的示例如下：

```c++
GetStartupInfo (&StartupInfo);
Int nMainRetVal = WinMain(GetModuleHandle(NULL),
                          NULL,
                          pszCommandLineAnsi,
                          (StartupInfo.dwFlags&STARTF_USESHOWWINDOW)?
                          StartupInfo.wShowWindow:SW_SHOWDEFFAULT);
```

进入点返回时，启动函数便调用C运行库的`exit`函数，将返回值`nMainRetVal`传递给它，进行一些必要的处理，最后调用系统函数`ExitProcess`退出。

开发人员可以修改启动源代码，但这样做会导致即使是同一编译器，生成的启动代码也不同。在分析程序的过程中，可以略过启动代码，直接将重点放到WinMain函数体上。

























